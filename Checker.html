<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Deblocked Link Checker</title>

<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#030316;
    --panel:#071028;
    --glass: rgba(255,255,255,0.03);
    --muted: #9fb4d9;
    --text: #dfefff;
    --accent: #48d6ff;    /* neon blue */
    --accent-2:#6aa3ff;   /* soft blue */
    --ok: #5ef2b0;
    --bad: #ff6b7a;
    --glass-2: rgba(72,214,255,0.04);
    --shadow: rgba(3,10,20,0.6);
  }

  html,body{
    height:100%;
    margin:0;
    background:
      radial-gradient(800px 400px at 10% 20%, rgba(72,214,255,0.03), transparent),
      radial-gradient(700px 300px at 90% 70%, rgba(106,163,255,0.02), transparent),
      var(--bg);
    color:var(--text);
    font-family: Inter, "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, monospace;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow:hidden;
  }

  /* STAR LAYERS */
  .star-layer {
    position: fixed;
    inset: -10%;
    z-index:0;
    pointer-events:none;
    background-repeat: repeat;
    mix-blend-mode: screen;
  }
  .stars-a{ background-image: radial-gradient(1px 1px at 10px 20px, rgba(255,255,255,0.95), transparent); opacity:0.14; filter: blur(.6px); transform:scale(1.12); }
  .stars-b{ background-image: radial-gradient(1px 1px at 40px 80px, rgba(72,214,255,0.6), transparent); opacity:0.09; filter: blur(.8px); transform:scale(1.06); }
  .stars-c{ background-image: radial-gradient(1px 1px at 200px 300px, rgba(106,163,255,0.7), transparent); opacity:0.06; filter: blur(1px); }

  /* LAYOUT */
  .root {
    position:relative;
    z-index:10;
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px;
  }

  .container{
    display:flex;
    gap:22px;
    width:min(1200px,96%);
    align-items:stretch;
  }

  /* LEFT: decorative terminal */
  .left {
    flex:1;
    min-width:360px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
    border-radius:12px;
    border:1px solid rgba(255,255,255,0.03);
    padding:18px;
    box-shadow: 0 18px 50px var(--shadow);
    display:flex;
    flex-direction:column;
    gap:12px;
    overflow:hidden;
  }

  .left .title {
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .brand {
    font-family:"JetBrains Mono", monospace;
    color:var(--accent);
    font-weight:600;
    letter-spacing:0.6px;
    font-size:1.05rem;
  }
  .sub { color:var(--muted); font-size:0.9rem; }

  .terminal {
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.01));
    border-radius:8px;
    padding:14px;
    font-family:"JetBrains Mono", monospace;
    font-size:0.95rem;
    color:var(--muted);
    height:54vh;
    overflow:auto;
    box-shadow: inset 0 20px 50px rgba(0,0,0,0.55);
  }

  .terminal-line { margin:8px 0; white-space:pre-wrap; }

  /* Right panel */
  .right {
    width:520px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px;
    border:1px solid rgba(255,255,255,0.035);
    padding:18px;
    box-shadow: 0 18px 50px var(--shadow);
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  .hdr {
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .hdr .title { font-family:"JetBrains Mono", monospace; font-weight:700; color:var(--text); letter-spacing:0.6px; font-size:1.2rem; }
  .hdr .meta { color:var(--muted); font-size:0.9rem; }

  /* INPUT */
  .input-wrap {
    display:flex;
    gap:10px;
    align-items:flex-start;
  }
  textarea#input {
    flex:1;
    min-height:120px;
    padding:12px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.04);
    background: linear-gradient(180deg, rgba(72,214,255,0.01), rgba(0,0,0,0.02));
    color:var(--text);
    font-family:"JetBrains Mono", monospace;
    font-size:0.94rem;
    outline:none;
    resize:vertical;
    box-shadow: inset 0 2px 8px rgba(0,0,0,0.5);
  }
  textarea#input::placeholder{ color: #8eaed8; }

  .controls {
    display:flex;
    flex-direction:column;
    gap:10px;
    min-width:120px;
  }
  .btn {
    padding:10px 12px;
    border-radius:10px;
    background:transparent;
    border:1px solid rgba(255,255,255,0.04);
    color:var(--text);
    font-weight:600;
    cursor:pointer;
    font-size:0.93rem;
    transition: transform .12s ease, box-shadow .12s ease;
    background: linear-gradient(90deg, rgba(72,214,255,0.03), rgba(106,163,255,0.02));
  }
  .btn:active{ transform: translateY(1px); }
  .btn.primary{
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    color:#021023;
    border:none;
    box-shadow: 0 8px 28px rgba(72,214,255,0.12);
  }
  .btn.ghost{
    background: transparent;
    border:1px dashed rgba(255,255,255,0.03);
    color:var(--muted);
  }

  .hint { color:var(--muted); font-size:0.86rem; }

  /* LOADING BAR (top of results) */
  .loading-top {
    height:12px;
    width:100%;
    border-radius:8px;
    overflow:hidden;
    background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.03);
    display:none;
    position:relative;
    box-shadow: inset 0 2px 8px rgba(0,0,0,0.45);
  }

  .loading-fill {
    height:100%;
    width:0%;
    background: linear-gradient(90deg, rgba(72,214,255,1), rgba(106,163,255,0.9));
    box-shadow: 0 10px 30px rgba(72,214,255,0.12);
    transition: width 2s cubic-bezier(.2,.9,.2,1), opacity 300ms ease;
  }

  /* segmented subtle LED effect */
  .loading-fill::after{
    content:"";
    position:absolute;
    inset:0;
    background-image: linear-gradient(90deg, rgba(255,255,255,0.03) 10%, transparent 10% 20%, rgba(255,255,255,0.02) 20% 30%, transparent 30% 50%);
    opacity:0.12;
    mix-blend-mode: overlay;
  }

  /* RESULTS BOX */
  .results {
    display:flex;
    gap:10px;
    margin-top:10px;
    width:100%;
  }
  .col {
    flex:1;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
    border-radius:8px;
    padding:10px;
    min-height:160px;
    border:1px solid rgba(255,255,255,0.02);
    overflow:auto;
  }
  .col h4 { margin:0 0 8px 0; color:var(--muted); font-weight:700; font-size:0.92rem; }

  .site {
    display:flex;
    justify-content:space-between;
    gap:8px;
    align-items:center;
    padding:8px;
    border-radius:6px;
    margin-bottom:8px;
    background: linear-gradient(90deg, rgba(255,255,255,0.01), transparent);
    border:1px solid rgba(255,255,255,0.01);
    color:var(--text);
    font-family:"JetBrains Mono", monospace;
    font-size:0.92rem;
    opacity:0;
    transform: translateY(6px);
    transition: opacity 260ms ease, transform 260ms ease;
  }
  .site.show { opacity:1; transform: translateY(0); }

  .site .url { color:var(--text); word-break:break-all; }
  .site .status { font-weight:700; font-size:0.86rem; letter-spacing:0.6px; }
  .status.ok { color:var(--ok); }
  .status.bad { color:var(--bad); }
  .status.err { color:var(--muted); }

  .footer {
    position:fixed;
    bottom:14px;
    left:50%;
    transform:translateX(-50%);
    color:var(--muted);
    font-family:"JetBrains Mono", monospace;
    font-size:0.85rem;
    z-index:30;
    opacity:0.9;
  }

  /* tiny scan sweep over left terminal during fetches */
  .scan-sweep {
    pointer-events:none;
    position:absolute;
    inset:0;
    background: linear-gradient(90deg, rgba(72,214,255,0.04), rgba(72,214,255,0.08) 50%, rgba(72,214,255,0.02));
    mix-blend-mode: screen;
    opacity:0;
    transform: translateX(-100%);
  }
  .scan-sweep.active{
    animation: sweep 1.5s linear infinite;
    opacity:0.12;
  }
  @keyframes sweep { from { transform:translateX(-120%);} to { transform:translateX(120%);} }

  /* small visual glitch/film grain during reveal (quiet) */
  .grain {
    position:absolute; inset:0; pointer-events:none;
    background-image: linear-gradient(transparent 60%, rgba(255,255,255,0.003) 60%);
    mix-blend-mode: overlay; opacity:0.02;
  }

  @media (max-width:980px){
    .container{ flex-direction:column; align-items:stretch; gap:14px; }
    .right{ width:100%; min-width:0; }
    .left{ min-height:36vh; height:auto; }
    .terminal{ height:34vh; }
  }
</style>
</head>
<body>
  <div class="star-layer stars-a" id="starsA"></div>
  <div class="star-layer stars-b" id="starsB"></div>
  <div class="star-layer stars-c" id="starsC"></div>

  <div class="root">
    <div class="container">
      <!-- left visual terminal -->
      <div class="left" aria-hidden="true">
        <div class="title">
          <div>
            <div class="brand">Deblocked Link Checker</div>
            <div class="sub">system console</div>
          </div>
          <div class="sub" id="clockLeft"></div>
        </div>

        <div class="terminal" id="terminalLog">
          <div class="terminal-line">booting subsystems…</div>
          <div class="terminal-line">starfield rendering engaged</div>
          <div class="terminal-line">ui shell: smoreh/tech-terminal.v2</div>
          <div class="terminal-line">policy: only process tokens starting with <code style="color:var(--accent)">https://</code></div>
        </div>

        <div class="scan-sweep" id="sweepLeft"></div>
      </div>

      <!-- right functional panel -->
      <div class="right" role="main" aria-labelledby="panelTitle">
        <div class="hdr">
          <div>
            <div class="title" id="panelTitle">Link Scanner</div>
            <div class="meta">Paste secure links (space/newline separated). Non-https tokens are ignored automatically.</div>
          </div>
          <div class="meta" id="clockRight"></div>
        </div>

        <div class="input-wrap" role="form">
          <textarea id="input" placeholder="https://example.com https://site.example/path"></textarea>
          <div class="controls">
            <button class="btn primary" id="scanBtn">SCAN</button>
            <button class="btn ghost" id="clearBtn">CLEAR</button>
          </div>
        </div>

        <div class="hint">Press Ctrl+Enter to scan. Loading bar appears at top of results for a short visual reveal.</div>

        <!-- loading bar (top of results) -->
        <div class="loading-top" id="loadingTop" aria-hidden="true">
          <div class="loading-fill" id="loadingFill"></div>
        </div>

        <!-- results -->
        <div class="results" id="results">
          <div class="col" id="blockedCol">
            <h4>Blocked</h4>
            <div id="blockedList"></div>
          </div>
          <div class="col" id="unblockedCol">
            <h4>Unblocked</h4>
            <div id="unblockedList"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="footer">Made by Smoreh · </div>
  <div class="grain"></div>

<script>
/* Star parallax reactive to mouse */
const starsA = document.getElementById('starsA');
const starsB = document.getElementById('starsB');
const starsC = document.getElementById('starsC');

document.addEventListener('mousemove', (e) => {
  const cx = innerWidth/2;
  const cy = innerHeight/2;
  const dx = (e.clientX - cx)/cx;
  const dy = (e.clientY - cy)/cy;
  starsA.style.transform = `translate3d(${dx * -40}px, ${dy * -30}px, 0) scale(1.12)`;
  starsB.style.transform = `translate3d(${dx * -80}px, ${dy * -60}px, 0) scale(1.06)`;
  starsC.style.transform = `translate3d(${dx * -140}px, ${dy * -100}px, 0) scale(1.02)`;
});

/* clocks */
function updateClocks(){
  const now = new Date();
  const s = now.toLocaleString();
  document.getElementById('clockLeft').textContent = s;
  document.getElementById('clockRight').textContent = now.toLocaleTimeString();
}
setInterval(updateClocks,1000);
updateClocks();

/* DOM refs */
const input = document.getElementById('input');
const scanBtn = document.getElementById('scanBtn');
const clearBtn = document.getElementById('clearBtn');
const loadingTop = document.getElementById('loadingTop');
const loadingFill = document.getElementById('loadingFill');
const blockedList = document.getElementById('blockedList');
const unblockedList = document.getElementById('unblockedList');
const terminalLog = document.getElementById('terminalLog');
const sweepLeft = document.getElementById('sweepLeft');

/* helper: append to terminal */
function term(msg){
  const d = document.createElement('div');
  d.className = 'terminal-line';
  d.textContent = msg;
  terminalLog.appendChild(d);
  terminalLog.scrollTop = terminalLog.scrollHeight;
}

/* filter: only tokens that START with https://  (unique) */
function extractLinks(text){
  const tokens = text.split(/\s+/).map(t=>t.trim()).filter(Boolean);
  const https = tokens.filter(t => t.toLowerCase().startsWith('https://'));
  // dedupe while preserving order
  const seen = new Set();
  const out = [];
  for (const t of https){
    if (!seen.has(t)){ seen.add(t); out.push(t); }
  }
  return out;
}

/* show loading top for ~2s (always) */
function showLoadingTop(){
  loadingTop.style.display = 'block';
  loadingFill.style.width = '0%';
  loadingFill.style.opacity = '1';
  // ensure style applied
  void loadingFill.offsetWidth;
  loadingFill.style.transition = 'width 2000ms cubic-bezier(.2,.9,.2,1)';
  loadingFill.style.width = '100%';
  return new Promise(resolve => {
    setTimeout(()=>{
      // fade out
      loadingFill.style.transition = 'opacity 320ms ease';
      loadingFill.style.opacity = '0';
      setTimeout(()=>{
        loadingTop.style.display = 'none';
        loadingFill.style.width = '0%';
        loadingFill.style.opacity = '1';
        resolve();
      }, 320);
    }, 2000);
  });
}

/* show site line with quiet reveal */
function addSiteLine(container, url, statusClass, statusText, delay=0){
  const node = document.createElement('div');
  node.className = 'site';
  node.innerHTML = `<div class="url">${url}</div><div class="status ${statusClass}">${statusText}</div>`;
  container.appendChild(node);
  // reveal
  setTimeout(()=> node.classList.add('show'), 30 + delay);
}

/* main scan flow */
scanBtn.addEventListener('click', async ()=>{
  const raw = input.value;
  term('>> scan requested');
  const links = extractLinks(raw);
  if (links.length === 0){
    term('>> no https:// tokens found — nothing to do');
    return;
  }
  term(`>> ${links.length} https:// link(s) queued`);
  // clear previous results with subtle fade
  blockedList.innerHTML = '';
  unblockedList.innerHTML = '';

  // show sweep and loading
  sweepLeft.classList.add('active');
  await showLoadingTop();
  sweepLeft.classList.remove('active');
  term('>> visual pass complete — initiating fetch checks');

  // iterate links sequentially for terminal feel
  for (let i=0; i<links.length; i++){
    const url = links[i];
    term('checking: ' + url);
    try {
      // attempt fetch (CORS may fail often)
      const resp = await fetch(url, { method:'GET', mode:'cors' });
      const txt = await resp.text();
      const isBlocked = txt.includes('<input type="Hidden" name="CAT"');
      if (isBlocked){
        addSiteLine(blockedList, url, 'bad', 'blocked', i*80);
        term(` -> blocked (${url})`);
      } else {
        addSiteLine(unblockedList, url, 'ok', 'unblocked', i*80);
        term(` -> unblocked (${url})`);
      }
    } catch (err){
      addSiteLine(unblockedList, url, 'err', 'error', i*80);
      term(` -> error (could not access ${url})`);
    }
    // small spacing so UI doesn't slam
    await new Promise(r=>setTimeout(r, 120));
  }
  term('>> scan finished');
});

/* Ctrl+Enter to run */
input.addEventListener('keydown', (e)=>{
  if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
    e.preventDefault();
    scanBtn.click();
  }
});

/* clear button */
clearBtn.addEventListener('click', ()=>{
  input.value = '';
  blockedList.innerHTML = '';
  unblockedList.innerHTML = '';
  terminalLog.innerHTML = '';
  term('booting subsystems…');
  term('starfield rendering engaged');
  term('ui shell: smoreh/tech-terminal.v2');
  term('policy: only process tokens starting with https://');
});

/* small accessibility: focus input on load */
window.addEventListener('load', ()=> input.focus());
</script>
</body>
</html>

